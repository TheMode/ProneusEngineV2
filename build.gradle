apply plugin: 'java'

import org.gradle.internal.os.OperatingSystem

switch ( OperatingSystem.current() ) {
	case OperatingSystem.WINDOWS:
		project.ext.lwjglNatives = "natives-windows"
		break
	case OperatingSystem.LINUX:
		project.ext.lwjglNatives = "natives-linux"
	break
	case OperatingSystem.MAC_OS:
		project.ext.lwjglNatives = "natives-macos"
		break
}

project.ext.lwjglVersion = "3.1.5"
project.ext.jomlVersion = "1.9.6"
project.ext.steamworks4jVersion = "1.6.2"
project.ext.discordRPCVersion = "1.3.0"

repositories {
	mavenCentral()
	maven { url 'https://jitpack.io/' }
}

dependencies {
    compile "org.lwjgl:lwjgl:$lwjglVersion"
    compile "org.lwjgl:lwjgl-glfw:$lwjglVersion"
    compile "org.lwjgl:lwjgl-openal:$lwjglVersion"
    compile "org.lwjgl:lwjgl-opengl:$lwjglVersion"
    compile "org.lwjgl:lwjgl-stb:$lwjglVersion"
    compile "org.lwjgl:lwjgl-tinyfd:$lwjglVersion"

    runtime "org.lwjgl:lwjgl:$lwjglVersion:natives-windows"
    runtime "org.lwjgl:lwjgl:$lwjglVersion:natives-linux"
    runtime "org.lwjgl:lwjgl:$lwjglVersion:natives-macos"

    runtime "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-windows"
    runtime "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-linux"
    runtime "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-macos"

    runtime "org.lwjgl:lwjgl-openal:$lwjglVersion:natives-windows"
    runtime "org.lwjgl:lwjgl-openal:$lwjglVersion:natives-linux"
    runtime "org.lwjgl:lwjgl-openal:$lwjglVersion:natives-macos"

    runtime "org.lwjgl:lwjgl-opengl:$lwjglVersion:natives-windows"
    runtime "org.lwjgl:lwjgl-opengl:$lwjglVersion:natives-linux"
    runtime "org.lwjgl:lwjgl-opengl:$lwjglVersion:natives-macos"

    runtime "org.lwjgl:lwjgl-stb:$lwjglVersion:natives-windows"
    runtime "org.lwjgl:lwjgl-stb:$lwjglVersion:natives-linux"
    runtime "org.lwjgl:lwjgl-stb:$lwjglVersion:natives-macos"

    runtime "org.lwjgl:lwjgl-tinyfd:$lwjglVersion:natives-windows"
    runtime "org.lwjgl:lwjgl-tinyfd:$lwjglVersion:natives-linux"
    runtime "org.lwjgl:lwjgl-tinyfd:$lwjglVersion:natives-macos"

    compile "com.code-disaster.steamworks4j:steamworks4j:${steamworks4jVersion}"
    compile "org.joml:joml:${jomlVersion}"
	compile "com.github.MinnDevelopment:Java-DiscordRPC:v${discordRPCVersion}"
	compile "org.json:json:20171018"
	compile "org.jbox2d:jbox2d-library:2.2.1.1"
	compile "org.luaj:luaj-jse:3.0-beta2"
	compile "com.mashape.unirest:unirest-java:1.4.9"
}

task fatJar(type: Jar) {
    baseName = project.name
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}
